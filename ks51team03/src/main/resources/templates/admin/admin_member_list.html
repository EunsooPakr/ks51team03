<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/adminPage_default}">
<head>
</head>
<th:block layout:fragment="customContent">
    <!-- ====================================
  ——— USER SECTION
  ===================================== -->
    <section class="py-12">
        <div class="board-body">
            <div class="board_wrap">
                <div class="board_title">
                    <strong id="board_title" th:text="'회원 리스트'">회원 리스트</strong>
                    <p>전체 회원 정보를 확인하고 검색할 수 있습니다.</p>
                </div>

                <!-- 게시판 검색 -->
                <div id="search" class="board-list-search">
                    <select id="searchKey">
                        <option value="memberId">회원 ID</option>
                        <option value="memberName">회원 이름</option>
                        <option value="memberLevel">회원 레벨</option>
                    </select>
                    <input type="text" id="searchValue" placeholder="검색어를 입력해주세요"/>
                    <button type="button" id="searchBtn">검색</button>
                </div>

                <!-- 게시판 말머리 -->
                <div class="board_list_wrap">
                    <div class="board_list">
                        <div class="top">
                            <div class="num">번호</div>
                            <div class="id">회원 ID</div>
                            <div class="name">회원 이름</div>
                            <div class="level">회원 레벨</div>
                        </div>

                        <div id="board-list-body">
                            <div th:if="${adminMemberList == null}">
                                <div class="title">
                                    <a>해당하는 회원이 존재하지 않습니다.</a>
                                </div>
                            </div>
                            <div th:unless="${adminMemberList == null}">
                                <div class="board-list-item" th:each="member, iterStat : ${adminMemberList}">
                                    <div>
                                        <div class="num" th:text="${iterStat.count}"></div>
                                        <div class="id" th:text="${member.memberId}"></div>
                                        <div class="name" th:text="${member.memberName}"></div>
                                        <div class="level" th:text="${member.memberLevel}"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="board_page">
                        <a id="board_currentPage" th:text="${currentPage}" style="display: none"></a>
                        <a href="#" class="bt first" th:attr="onclick='changePage(\'' + ${startPageNum} + '\')'" th:utext="${'<<'}"></a>
                        <a th:if="${currentPage > 1}" class="bt prev"
                           href="#" th:attr="onclick='changePage(\'' + ${currentPage - 1} + '\')'" th:utext="${'<'}"></a>
                        <a th:unless="${currentPage > 1}" class="bt prev" th:utext="${'<'}"></a>
                        <th:block class="num" th:each="num : ${#numbers.sequence(startPageNum, endPageNum)}">
                            <a th:if="${currentPage == num}" class="num on" th:text="${num}"></a>
                            <a th:unless="${currentPage == num}" class="num" href="#" th:attr="onclick='changePage(\'' + ${num} + '\')'" th:text="${num}"></a>
                        </th:block>
                        <a th:if="${currentPage < lastPage}" class="bt next" href="#" th:attr="onclick='changePage(\'' + ${currentPage + 1} + '\')'" th:utext="${'>'}"></a>
                        <a th:unless="${currentPage < lastPage}" class="bt next" th:utext="${'>'}"></a>
                        <a href="#" th:attr="onclick='changePage(\'' + ${lastPage} + '\')'" th:utext="${'>>'}"></a>
                    </div>
                </div>
            </div>
        </div>
    </section>

</th:block>
<!-- 사용자정의 javascript file -->
<th:block layout:fragment="customJsFile">
    <script th:src="@{/js/jquery-3.7.1.js}"></script>
</th:block>
<script th:inline="javascript">
    $(document).ready(function() {
        $('#searchBtn').click(function(event) {
            event.preventDefault();
            const searchKey = $('#searchKey').val();
            const searchValue = $('#searchValue').val();

            let serverSearchKey;
            switch (searchKey) {
                case 'memberId':
                    serverSearchKey = 'id';
                    break;
                case 'memberName':
                    serverSearchKey = 'name';
                    break;
                case 'memberLevel':
                    serverSearchKey = 'level';
                    break;
                default:
                    serverSearchKey = 'id';
            }

            const url = '/admin/admin_member_list?searchType=' + serverSearchKey + '&searchKeyword=' + searchValue;
            window.location.href = url;

</script>
<!-- 사용자정의 javascript -->
<th:block layout:fragment="customJs">

</th:block>

</html>